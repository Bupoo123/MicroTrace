# å¿«é€Ÿéƒ¨ç½²åˆ°æœåŠ¡å™¨ - ç®€åŒ–ç‰ˆ

## ğŸ¯ ç›®æ ‡

å°†åº”ç”¨éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼š121.36.255.207

## âš¡ å¿«é€Ÿæ­¥éª¤ï¼ˆ5åˆ†é’Ÿï¼‰

### 1. è¿æ¥åˆ°æœåŠ¡å™¨

```bash
ssh hanxu@121.36.255.207
# å¯†ç : Matridx@2025
```

### 2. è¿è¡Œä¸€é”®éƒ¨ç½²è„šæœ¬

```bash
# ä¸‹è½½éƒ¨ç½²è„šæœ¬
cd ~
wget https://raw.githubusercontent.com/Bupoo123/MicroTrace/main/deploy-server.sh
chmod +x deploy-server.sh

# æˆ–è€…å¦‚æœå·²ç»å…‹éš†äº†ä»£ç 
cd ~/microtrace
chmod +x deploy-server.sh
./deploy-server.sh
```

### 3. ç­‰å¾…éƒ¨ç½²å®Œæˆ

è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆï¼š
- âœ… æ£€æŸ¥ç¯å¢ƒ
- âœ… å®‰è£…ä¾èµ–
- âœ… åˆå§‹åŒ–æ•°æ®åº“
- âœ… æ„å»ºåº”ç”¨
- âœ… å¯åŠ¨æœåŠ¡

### 4. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š**http://121.36.255.207:5005**

ä½¿ç”¨è´¦å·ï¼š`admin` / `123456` ç™»å½•

---

## ğŸ“‹ å¦‚æœè„šæœ¬å¤±è´¥ï¼Œæ‰‹åŠ¨æ‰§è¡Œ

### æ­¥éª¤1ï¼šå‡†å¤‡ç¯å¢ƒ

```bash
# æ£€æŸ¥ Node.js
node -v
# å¦‚æœæ²¡æœ‰ï¼Œå®‰è£…ï¼š
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
source ~/.bashrc
nvm install 20
```

### æ­¥éª¤2ï¼šè·å–ä»£ç 

```bash
cd ~
git clone https://github.com/Bupoo123/MicroTrace.git microtrace
cd microtrace
```

### æ­¥éª¤3ï¼šå®‰è£…å’Œåˆå§‹åŒ–

```bash
# å®‰è£…ä¾èµ–
npm install --production

# ç”Ÿæˆæ•°æ®åº“å®¢æˆ·ç«¯
npx prisma generate

# åˆ›å»ºæ•°æ®åº“
npx prisma db push

# åˆå§‹åŒ–æ•°æ®
npm run db:seed

# æ„å»ºåº”ç”¨
npm run build
```

### æ­¥éª¤4ï¼šå¯åŠ¨åº”ç”¨

```bash
# å®‰è£… PM2
npm install -g pm2

# å¯åŠ¨åº”ç”¨
pm2 start npm --name "microtrace" -- start

# ä¿å­˜é…ç½®
pm2 save
```

### æ­¥éª¤5ï¼šè®¿é—®

æ‰“å¼€æµè§ˆå™¨ï¼šhttp://121.36.255.207:5005

---

## ğŸ”§ å¸¸ç”¨ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹åº”ç”¨çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs microtrace

# é‡å¯åº”ç”¨
pm2 restart microtrace

# åœæ­¢åº”ç”¨
pm2 stop microtrace

# æ›´æ–°ä»£ç åé‡å¯
cd ~/microtrace
git pull
npm install --production
npm run build
pm2 restart microtrace
```

---

## â“ é‡åˆ°é—®é¢˜ï¼Ÿ

1. **æ— æ³•è¿æ¥æœåŠ¡å™¨**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - ç¡®è®¤IPåœ°å€å’Œå¯†ç æ­£ç¡®

2. **Node.js æœªå®‰è£…**
   - æŒ‰ç…§æ­¥éª¤1å®‰è£… Node.js

3. **ç«¯å£è¢«å ç”¨**
   - æ£€æŸ¥ï¼š`lsof -i :5005`
   - æˆ–ä¿®æ”¹ `package.json` ä¸­çš„ç«¯å£

4. **åº”ç”¨æ— æ³•å¯åŠ¨**
   - æŸ¥çœ‹æ—¥å¿—ï¼š`pm2 logs microtrace`
   - æ£€æŸ¥æ•°æ®åº“ï¼š`ls -lh prisma/*.db`

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ï¼š[SERVER_DEPLOYMENT.md](./SERVER_DEPLOYMENT.md)

